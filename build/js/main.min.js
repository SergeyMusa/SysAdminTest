// import { add } from './math.js';
// console.log(add(1, 2));
// !!!!!!!!!!!! не работает импорт впринципе и лодаш в частности
// import _ from "lodash";
// console.log(_.isEqual(1, true));
"use strict";
"use strict";

// <!-- проверка ввода имени -->
// блокируем тест пока не получим имя, чтобы работала статистика
// и заносим имя в локалСторадж
// отключаем поля ввода пока не нажат чекбокс
var checkboxClick = document.querySelector("#flexSwitchCheckDefault");

var disableButton = function disableButton() {
  // alert( 'чекбокс выключён1' );
  userOrg.disabled = true;
  userName.disabled = true;
  userButton.disabled = true;
  document.getElementById('autorization').hidden = false;

  if (checkboxClick.checked) {
    // alert( 'чекбокс включён' );
    userName.disabled = false;
    userOrg.disabled = false;
    userButton.disabled = false; // autorization.dis = false;

    document.getElementById('autorization').hidden = true;
  }
}; // ------


function randomInteger(min, max) {
  // получить случайное число от (min-0.5) до (max+0.5)
  var rand = min - 0.5 + Math.random() * (max - min + 1);
  return Math.round(rand);
} // выбираем имя по умолчанию если не введено что-то другое и заносим в локал сторадж


var doStartTest = function doStartTest() {
  // alert( 'чекбокс выключён1' );
  var randomUser = randomInteger(100, 999);
  userName.placeholder = userName.placeholder + "_" + randomUser;
  var user = userName.placeholder;
  var org = userOrg.placeholder;

  if (userName.value !== "" && userOrg.value !== "") {
    // userName.placeholder = "Сыкло )";
    user = "\"".concat(userName.value, "\"");
    org = "\"".concat(userOrg.value, "\"");
  }

  localStorage.setItem('user', user);
  localStorage.setItem('org', org); // console.log(
  //   localStorage.getItem('user') + ' ' + localStorage.getItem('org')
  // );

  userButton.disabled = true;
  userButtonTest.disabled = false;
  flexSwitchCheckDefault.disabled = true;
  generationTest();
};
"use strict";

var iqFunction = function iqFunction() {// const htmlElement = document.documentElement;
  // const firstChildNodeH = htmlElement.firstChild;
  // const lastChildNodeH = htmlElement.lastChild;
  // console.log("htmlElement___" + htmlElement);
  // console.log("firstChildNodeH" + firstChildNodeH);
  // console.log("lastChildNodeH" + lastChildNodeH);
  // const headElement = document.head;
  // const firstChildNodeHd = headElement.firstChild;
  // const lastChildNodeHd = headElement.lastChild;
  // console.log("headElement______" + headElement);
  // console.log("firstChildNodeHd" + firstChildNodeHd);
  // console.log("lastChildNodeHd" + lastChildNodeHd);
  // const bodyElement = document.body;
  // const firstChildNodeB = bodyElement.firstChild;
  // const lastChildNodeB = bodyElement.lastChild;
  // console.log("bodyElement__________" + bodyElement);
  // console.log("firstChildNodeB" + firstChildNodeB);
  // console.log("lastChildNodeB" + lastChildNodeB);
  // return 'index'
};
"use strict";

// скрипты для страницы тест
// !!!!!!!!!!!!!! пока не работает импорт, делать по другому
// подключаем библиотеку Лодаш
// import * as _ from 'lodash';
// import _ from "lodash";
// console.log(_.isEqual(1, 2));
// формируем тест
// const doTest = () => {
var header = document.querySelector("header");
var section = document.querySelector("section");
var questionsNumber = 2; // userButtonTest.disabled = false;

var answerList = {};
var requestURL = "./json/test.json";
var request = new XMLHttpRequest();
request.open("GET", requestURL);
request.responseType = "json";
request.send();
var sysAdminTest; //был запуск при старте страницы, соответственно этого скрипта
//имело смысл, когда несколько js файлов
// request.onload = function () {

var generationTest = function generationTest() {
  sysAdminTest = request.response;
  populateHeader(sysAdminTest);
  showTest(sysAdminTest);
  testCount(sysAdminTest);
  setTimeout(function () {
    console.log(Object.keys(answerList).length);
  }, 5000);
};

function populateHeader(obj) {
  var myH1 = document.createElement("h1");
  myH1.textContent = obj["jTestSysadmin"];
  header.appendChild(myH1);
  var user = document.createElement("p");
  "Тест проходит: " + obj["intervieweeName"] + " из организации: " + obj["intervieweeOrg"]; // user.textContent = 'Тест проходит: ' + localStorage.getItem('user') + ' из организации: ' + localStorage.getItem('org');
  //- let intervieweeName = user.textContent =localStorage.getItem('user');
  //- let intervieweeOrg = user.textContent =localStorage.getItem('org');

  header.appendChild(user);
}

function showTest(obj) {
  var questions = obj["survey"];

  for (var i = 0; i < questions.length; i++) {
    // console.log(questions.length);
    var myArticle = document.createElement("article");
    var testNumber = document.createElement("h2");
    var testQuestion = document.createElement("p");
    var testVariants = document.createElement("p");
    var testAnswer = document.createElement("p"); // const myList = document.createElement("ul");

    myArticle.setAttribute("class", "test3");
    testNumber.textContent = questions[i].numberTest;
    testQuestion.textContent = "Вопрос: " + questions[i].question;
    testVariants.textContent = "Варианты ответов: " + questions[i].answers;
    testAnswer.textContent = "Правильный ответ: " + questions[i].right + " - " + questions[i].justification;
    var radioAnswerList = document.createElement("div");
    var variantAnsver = questions[i].answers;

    for (var j = 0; j < variantAnsver.length; j++) {
      // const listItem = document.createElement("li");
      var radioAnswer = document.createElement("div");
      radioAnswer.innerHTML = "<input type='radio' name='answer".concat(i, "' value='").concat(j, "' onClick='onChangeButtonValue(").concat(i, ",").concat(j, ")'> <label for='").concat(j, "'>").concat(variantAnsver[j], "</label>"); // const listItem = document.createElement("radio");
      // listItem.textContent = variantAnsver[j];
      // radioAnswer.appendChild(listItem);

      radioAnswerList.appendChild(radioAnswer);
    }

    myArticle.appendChild(testNumber);
    myArticle.appendChild(testQuestion); //

    myArticle.appendChild(radioAnswerList);
    myArticle.appendChild(testAnswer); // ответ

    section.appendChild(myArticle); // myArticle.appendChild(myPara2);
  }
}

function onChangeButtonValue(num, value) {
  answerList[num] = value;
}

function checkTest() {
  //<input type="radio" name="answer0" value="0">
  // function question1()
  userButtonTest.disabled = false;
  var selectedAns = 0;
  var questions;
  var answerListTrue = {};
  sysAdminTest["survey"].map(function (item) {
    answerListTrue[item.numberTest] = item.right;
  });
  console.log('answerList: ', answerList, 'answerListTrue: ', answerListTrue); // console.log(sysAdminTest["survey"]);

  for (var j = 0; j < questionsNumber; j++) {
    // console.log("j- " + j);
    var answerNumber = "answer".concat(j); // console.log(typeof (answerNumber) + answerNumber);
    // console.log(answerNumber);
    //!!!!!!!!!!!!!!!!!!!!! строка работает а переменная нет

    questions += document.getElementsByName(answerNumber); // console.log(`questions=` + questions);

    for (var i = 0; i < questions.length; i++) {
      // console.log("questions.length " + questions.length);
      if (questions[i].checked == true) {
        selectedAns = questions[i].value;
        console.log("value " + selectedAns);
        break;
      } // if (selectedAns == '1') {
      //     console.log("That the correct answer!");
      //     console.log("value " + selectedAns);
      //     //  break;
      // }
      // else {
      //     console.log("Oops! try again!");
      //     console.log("value " + selectedAns);
      //     //    break;
      // }

    }

    ;
  }

  ;
}

;

var testCount = function testCount() {
  var count = Number(localStorage.getItem('count')) || 0; // console.log("count_= " + count);

  count = count + 1; // !!!!!!!!! исправить костыль с счетчиком(проверить может уже)

  localStorage.setItem('count', count); // console.log("count= " + localStorage.getItem('count'));
}; //
// правильные ответы можно выводить все вместе внизу
// потом сделать - перерисовать тест с выделением правильный


var doDelete = function doDelete() {
  // localStorage.removeItem('count');
  localStorage.setItem('count', 0);
  console.log("count= " + localStorage.getItem('count'));
}; // }